<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta subject="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Angular JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-route.min.js"></script>
    <!-- Qrcode -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
        integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- ----------------------------------- -->
    <link rel="stylesheet" href="css/display.css">
    <title>ADMIN - Content manager</title>
</head>

<body>
    <h1 class="text-center text-uppercase">content detail</h1>
    <hr>
    <main class="container-xl border">
        <!-- Javascript setup -->
        <div id="message"></div>
        <div id="prepareImg"></div>

        <div class="row border-top" ng-app="app" ng-controller="control">
            <!-- Show images -->
            <div class="col-xl-6 bg-warning">
                <div class="position-fixed top-0 end-0 w-25">
                    <input type="number" class="form-control text-center" ng-model="fil.index" ng-enter="read(fil.index)" min="0">
                </div>
                <div class="d-flex flex-wrap align-content-between">
                    <h3 class="text-break" ng-bind="entity.subject" style="text-align: justify;"></h3>
                    <div ng-if="entity.content_images.length > 0" class="m-auto mt-1 w-100">
                        <!-- carousel images -->
                        <div id="contentImage" class="carousel slide rounded-3 flex-fill" data-bs-ride="true">
                            <div class="carousel-inner">
                                <div class="carousel-item {{i==0 ? 'active' : ''}} ar16x9" ng-repeat="(i,image) in entity.content_images">
                                    <img ng-src="{{getImage(image)}}" class="fit-img o-fit-cover" id="showImage" alt="{{image}}">
                                    <div class="w-100 border overflow-auto text-center">
                                        <label class="text-muted text-nowrap" ng-bind="image ? image : 'default image'"></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="w-100 border text-nowrap overflow-auto" ng-if="entity.content_images.length > 1">
                            <button type="button" data-bs-target="#contentImage" data-bs-slide-to="{{i}}" class="btn size-5 p-1 {{e.active}}"
                                ng-repeat="(i,image) in entity.content_images">
                                <img class="fit-img" ng-src="{{getImage(image)}}" alt="{{image}}">
                            </button>
                        </div>
                    </div>
                    <div class="w-100 ar4x3" ng-if="1 > entity.content_images.length">
                        <img class="fit-img" style="object-fit: contain;" ng-src="{{getImage('default.png')}}" alt="default.png" title="Nội dung này chưa có ảnh">
                    </div>
                </div>
            </div>
            <!-- Content description -->
            <div class="col-xl-6 fs-3">
                <p class="mt-1" style="text-align: justify;">
                    <strong>Mô tả:</strong>&nbsp;{{entity.content}}
                </p>
                <p class="mt-1" >
                    <div class="fw-bold">Thời gian tải:</div>
                    {{entity.regTime | date :'EEEE, dd-MM-yyyy (hh:mm:ss)'}}
                </p>
                <p class="mt-1" >
                    <strong>Lượt xem:</strong>
                    <u>{{entity.views}}</u>
                </p>

                <hr>
                <p class="mt-1" style="text-align: justify;">
                    <div class="">
                        <label class="fw-bold">Họ Tên</label>
                        <a href="" title="Các sản phẩm liên quan của {{entity.account.name}}"
                            ng-if="entity.account" ng-click="getTo('account?account_id='+entity.account.username,'r_contents')">
                            {{entity.account.name}}
                        </a>
                    </div>
                    <div class="">
                        <label class="fw-bold">Liên hệ</label>
                        <a href="mailto:{{entity.account.email}}" ng-bind="entity.account.email" 
                            title="Liên hệ tới email {{entity.account.email}}"></a>
                    </div>
                </p>

                <hr>
                <p class="mt-1" style="text-align: justify;">
                    <div><b>Nội dung cùng loại:</b></div>
                    <a class="ms-2" style="cursor: pointer;" ng-click="r_contents=null">
                        <span class="fa-hashtag">Tất cả</span>
                    </a>
                    <a class="ms-2" style="cursor: pointer;" ng-click="getTo('category?category_id='+e.id, 'r_contents')" 
                        ng-repeat="e in categories | fil2Many:{id:entity.categories}">
                        <span class="fa-hashtag" ng-bind="e.name"></span>
                    </a>    
                </p>
            </div>

            <!-- recommended contents -->
            <div class="mt-1 d-flex flex-wrap border-top">
                <!-- <div ng-repeat="e in r_contents">
                    <button ng-click="read(e)" ng-bind="e.id"></button>
                    {{e.subject}}
                </div> -->

                <div ng-repeat="e in (r_contents ? r_contents : data)" class="position-relative p-1 text-center size-5 ar4x3 hover-box" ng-dblclick="read(e)">
                    <h5 class="text-nowrap overflow-hidden" style="text-overflow: ellipsis;" ng-bind="e.subject"></h5>
                    <img class="fit-img" style="object-fit: cover;" ng-src="{{getImage(e.content_images[0])}}" alt="{{e.content_images[0]}}" ng-if="hasImg = e.content_images.length>0">
                    <img style="vertical-align: middle;" ng-src="{{getImage('default.png')}}" alt="default.png" ng-if="!hasImg">
                    
                    <div class="m-2 position-absolute bottom-0 end-0 text-end showA">
                        <a style="display: none;" href="mailTo:{{e.account.email}}" class="btn btn-dark">Gửi email</a>
                        <a style="display: none;" href="" class="btn btn-dark" ng-click="getTo('account?account_id='+e.account.username,'r_contents')">Sản phẩm</a>

                        <button class="btn p-0 ar1x1">
                            <img class="fit-img o-fit-cover" style="border-radius: 20px; max-width: 2.5rem;"
                                ng-src="{{getImage(e.account.image ? e.account.image : 'default.png','account')}}" 
                                alt="{{e.account.image}}" title="{{e.account.name}}">
                        </button>
                    </div>
                </div>
            </div>
        </div>
        

        <!-- Javascript -->
        <script src="js/rrs.js"></script>
        <script src="js/content_detail.js"></script>
    </main>
</body>

</html>